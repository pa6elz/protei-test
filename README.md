# protei-test
Тестовое задание на позицию "Разработчик Java (Backend)" от Протей НТЦ

## Содержание
* [Задача](#task)
* [Результат](#result)
  * [Получение информации о пользователе](#getUser)
  * [Изменение статуса пользователя](#setUserStatus)
  * [Добавление нового пользователя](#addUser)
* [Сборка](#buildGuide)
* [Тестирование](#testing)

<a name="task"></a>
## Задача

Написать серверную часть Web-приложения согласно следующим требованиям:

* Средства разработки: Java 1.7 (или выше)
* Инструменты: Spring Framework
* Протокол: HTTP
* База данных: PostgreSQL

Примечание: Вместо обращения к реальной базе можно реализовать "заглушку" с имитацией обращения и задержкой по времени 5-10 сек.

Функционал:

* Добавление нового пользователя. Передаем на сервер данные пользователя (имя пользователя, email, phoneNumber и т.д.). Сохраняем информацию в базе данных. Ответ сервера — уникальный ID нового пользователя
* Получение информации о пользователе. Передаем на сервер уникальный ID пользователя. Читаем информацию из базы данных. Ответ сервера — данные пользователя
* Изменение статуса пользователя (Online, Away, Offline). Передаем на сервер уникальный ID пользователя и новый статус. Изменяем статус пользователя. Ответ сервера — уникальный ID пользователя, новый и предыдущий статус
* Перевод в статус Away должен делаться автоматически через 5 минут после последнего изменения статуса на online. Таким образом, если “подтверждать” статус online пользователя каждые 5 минут - автоматического перехода в Away не должно быть

Обязательные требования:
* RESTful
* Все данные в формате JSON
* Обработка ошибок

<a name="result"></a>
## Результат
<a name="getUser"></a>
### Получение информации о пользователе
`GET /users/{id}`

где id – уникальный ID пользователя.
#### Ответ
```json
{
    "id": 22,
    "name": "tesla",
    "email": "support@tesla.com",
    "phoneNumber": "+71234567890",
    "status": "Away"
}
```
#### Ошибка
`404 Not Found` - если запрошенный пользователь не существует.

<a name="setUserStatus"></a>
### Изменение статуса пользователя
`PUT /users/{id}`
 
 ```json
 {
        "status": "Online"
 }
 ```

где id – уникальный ID пользователя.
#### Ответ
```json
{
    "userId": 21,
    "previousStatus": "Away",
    "currentStatus": "Online"
}
```
#### Ошибка
`404 Not Found` - если запрошенный пользователь не существует.

<a name="addUser"></a>
### Добавление нового пользователя
`POST /users`

```json
{
	"name": "spacex",
	"email": "support@spacex.com",
	"phoneNumber": "+71234567890"
}
```
Параметры:
* name — имя пользователя;
* email — электронная почта пользователя
* phoneNumber — номер мобильного телефона пользователя в формате +71234567890 или 81234567890

#### Ответ
```json
{
    "id": 23
}
```
<a name="buildGuide"></a>
## Сборка проекта

Осуществляется с помощью исполнения команды "mvn package".

<a name="testing"></a>
## Тестирование

Был создан тест "UserServiceTest" позволяющий протестировать корректность выполнения поставленных бизнес-задач. А также демонстрирующий особенности работы методов тестируемого компонента.
В тесте был использован фреймворк Mockito.
